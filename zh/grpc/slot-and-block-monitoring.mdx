---
title: 使用 Yellowstone gRPC 进行 Slot 和 Block 监控
sidebarTitle: Slot 和 Block 监控
description: 通过实时 slot 和 block 流，监控 Solana 网络共识、区块生成和网络状态变化。
---

## 概述

Slot 和 block 监控提供了对 Solana 网络共识、区块生成时间和网络健康状况的洞察。实时跟踪 slot 进展、区块最终化和网络性能指标。

<Info>
**先决条件：** 本指南假设您已完成 [Yellowstone gRPC 快速入门](/zh/grpc/quickstart) 并已设置好工作流。
</Info>

## 监控类型

<Tabs>
  <Tab title="Slot 更新">
    **跟踪网络共识进展**
    
    监控不同承诺级别的 slot 进展：
    

{/* 代码占位符_6ac4d6a83eb34f7cce1e7dc6f2624801 */}

    
    **Slot 数据包括：**
    - Slot 编号
    - 父 slot
    - 承诺状态（已处理、已确认、已最终化）
    - 领导者信息
    
    <Note>
    **最佳用途：** 网络健康监控、slot 时间分析、共识跟踪
    </Note>
  </Tab>
  
  <Tab title="Block 数据">
    **监控完整的区块信息**
    
    流式传输包含交易和账户更新的完整区块：
    

{/* 代码占位符_37c4c4725e20e001df7b8ffc2c85a05e */}

    
    **Block 数据包括：**
    - 区块元数据
    - 所有交易
    - 账户更新
    - 区块时间
    
    <Warning>
    **高流量：** 完整的区块流会生成大量数据。使用过滤器以减少流量。
    </Warning>
  </Tab>
  
  <Tab title="Block 元数据">
    **轻量级区块信息**
    
    获取不含交易细节的区块元数据：
    

{/* 代码占位符_98adface3bffbbf8b49d8aae728a82f4 */}

    
    **元数据包括：**
    - 区块哈希和父哈希
    - Slot 编号
    - 区块高度
    - 交易数量
    - 区块奖励
    
    <Tip>
    **高效：** 相较于完整区块流的低带宽替代方案
    </Tip>
  </Tab>
</Tabs>

## 实用示例

### 示例 1：网络健康监控

跟踪 slot 进展并识别网络问题：

{/* 代码占位符_c712a8370fd17f614e38d8489bb7f0c7 */}

### 示例 2：区块生成监控

跟踪区块生成和交易量：

{/* 代码占位符_e11da9c5ff3f8520f199b7840cdb8dc7 */}

### 示例 3：过滤区块监控

监控包含特定程序活动的区块：

{/* 代码占位符_3554bc90646ad93c3408e5226df65dc0 */}

## 数据结构

理解插槽和区块数据格式：

<Accordion title="插槽数据结构">

{/* 代码占位符_35387d95e1092ecc1b1cc0762c577b8a */}

  
  **插槽进程：** 每个插槽代表约400毫秒的网络时间
  
  **确认级别：**
  - **已处理：** 初始插槽处理
  - **已确认：** 超级多数确认  
  - **已最终确定：** 不可逆的最终确定
</Accordion>

<Accordion title="区块元数据结构">

{/* 代码占位符_1d6cebcebb81f912386486d958c52a95 */}

  
  **区块时间：** 估计区块生成的时间
  
  **奖励：** 区块生成的验证者奖励
</Accordion>

<Accordion title="完整区块结构">

{/* 代码占位符_9ec85ce5de7a4a4d6b267957905c899b */}

  
  **大小警告：** 完整区块可能包含所有交易和账户，大小可达数MB
</Accordion>

## 性能考虑

<CardGroup cols={2}>
  <Card title="插槽监控" icon="clock">
    **轻量且高效**
    
    - 非常低的带宽使用
    - 实时网络健康洞察
    - 最小的处理开销
    - 适合监控仪表板
  </Card>
  
  <Card title="区块元数据" icon="info">
    **平衡的方法**
    
    - 中等带宽使用
    - 区块级洞察而非完整数据
    - 交易计数和时间
    - 适合分析
  </Card>
  
  <Card title="完整区块" icon="database">
    **高容量数据**
    
    - 高带宽要求
    - 完整的交易数据
    - 需要强大的处理能力
    - 使用过滤器减少数据量
  </Card>
  
  <Card title="过滤区块" icon="filter">
    **优化的流媒体**
    
    - 使用 accountInclude 过滤器
    - 禁用不必要的数据（条目，账户）
    - 专注于特定程序
    - 在细节和性能之间取得平衡
  </Card>
</CardGroup>

## 用例

<Tabs>
  <Tab title="网络监控">
    **跟踪网络健康和性能**
    
    - 插槽时间分析
    - 网络拥塞检测
    - 共识监控
    - 验证者性能
    

{/* 代码占位符_8d0bc1e4c84467801aa929e905072f25 */}

  </Tab>
  
  <Tab title="分析与指标">
    **收集区块链分析数据**
    
    - 交易量跟踪
    - 费用分析
    - 区块大小指标
    - 活动模式
    

{/* 代码占位符_1a6f72dc928dd861e263ea3cd4280687 */}

  </Tab>
  
  <Tab title="应用程序同步">
    **保持应用程序与网络同步**
    
    - 基于插槽的更新
    - 区块确认
    - 网络状态跟踪
    - 时间同步
    

{/* 代码占位符_c4fbdefa2933de4191c6e412c547e51b */}

  </Tab>
</Tabs>

## 错误处理

常见问题和解决方案：

<Accordion title="缺失的插槽">
  **问题：** 插槽进程中断
  
  **原因：**
  - 网络连接问题
  - 验证者停机
  - 客户端处理延迟
  
  **解决方案：**
  - 跟踪插槽间隙并警报
  - 实施追赶逻辑
  - 监控连接健康状况
</Accordion>

<Accordion title="高流量">
  **问题：** 区块数据过多
  
  **解决方案：**
  - 使用区块元数据而不是完整区块
  - 应用账户过滤器以减少数据
  - 禁用不必要的包含（条目，账户）
  - 异步处理数据
</Accordion>

<Accordion title="时间问题">
  **问题：** 插槽时间不一致
  
  **分析：**
  - 计算移动平均值
  - 跟踪时间偏差
  - 监控网络健康指标
  - 与验证者性能相关联
</Accordion>

## 最佳实践

<Note>
**生产指南：**

- **从元数据开始** - 在完整区块之前使用区块元数据
- **应用过滤器** - 使用 accountInclude 减少无关数据
- **监控时间** - 跟踪插槽进程以了解网络健康状况
- **处理间隙** - 实施缺失插槽/区块的逻辑
- **异步处理** - 不要用繁重的计算阻塞流处理
- **使用适当的承诺** - 根据需要匹配承诺级别
</Note>

## 下一步

<CardGroup cols={2}>
  <Card title="条目监控" icon="code" href="/zh/grpc/entry-monitoring">
    了解低级区块链条目监控
  </Card>
  <Card title="高级模式" icon="chart-line" href="/zh/grpc/stream-pump-amm-data">
    真实案例：监控 Pump AMM 数据
  </Card>
</CardGroup>