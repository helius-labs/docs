---
title: ä½¿ç”¨ Yellowstone gRPC è¿›è¡Œæ¡ç›®ç›‘æ§
sidebarTitle: æ¡ç›®ç›‘æ§
description: ç›‘æ§ Solana åŒºå—é“¾çš„ä½çº§æ¡ç›®ã€äº¤æ˜“æ‰¹æ¬¡å’Œæ‰§è¡Œå•å…ƒï¼Œä»¥è¿›è¡Œæ·±å…¥çš„ç½‘ç»œåˆ†æã€‚
---

## æ¦‚è¿°

æ¡ç›®ç›‘æ§æä¾›äº†å¯¹ Solana åŒºå—é“¾åŸºæœ¬æ‰§è¡Œå•å…ƒçš„è®¿é—®ã€‚æ¡ç›®åŒ…å«äº¤æ˜“æ‰¹æ¬¡åŠå…¶æ‰§è¡Œç»“æœï¼Œæä¾›äº†åŒºå—é“¾æ´»åŠ¨çš„æœ€ä½çº§è§†å›¾ã€‚

<Info>
**å…ˆå†³æ¡ä»¶ï¼š** æœ¬æŒ‡å—å‡è®¾æ‚¨å·²å®Œæˆ [Yellowstone gRPC å¿«é€Ÿå…¥é—¨](/zh/grpc/quickstart) å¹¶å·²è®¾ç½®å¥½å·¥ä½œæµã€‚
</Info>

<Warning>
**é«˜çº§ä¸»é¢˜ï¼š** æ¡ç›®ç›‘æ§ä¸»è¦ç”¨äºæ·±å…¥çš„åŒºå—é“¾åˆ†æã€è°ƒè¯•å’Œç‰¹æ®Šç”¨ä¾‹ã€‚å¤§å¤šæ•°åº”ç”¨ç¨‹åºåº”ä½¿ç”¨äº¤æ˜“æˆ–è´¦æˆ·ç›‘æ§ã€‚
</Warning>

## ä»€ä¹ˆæ˜¯æ¡ç›®ï¼Ÿ

<Tabs>
  <Tab title="æ¡ç›®åŸºç¡€">
    **åŸºæœ¬çš„åŒºå—é“¾å•å…ƒ**
    
    æ¡ç›®æ˜¯éªŒè¯è€…ç”¨æ¥æ„å»ºåŒºå—çš„åŸºæœ¬æ„å»ºå—ï¼š
    
    - **äº¤æ˜“æ‰¹æ¬¡ï¼š** ä¸€èµ·æ‰§è¡Œçš„äº¤æ˜“ç»„
    - **æ‰§è¡Œé¡ºåºï¼š** æ¡ç›®å†…çš„ç¡®å®šæ€§äº¤æ˜“æ’åº
    - **å“ˆå¸Œé“¾ï¼š** æ¡ç›®ä¹‹é—´çš„åŠ å¯†é“¾æ¥
    - **æ—¶é—´ä¿¡æ¯ï¼š** æ¡ç›®åˆ›å»ºå’Œå¤„ç†çš„æ—¶é—´
    

    ```typescript
    const subscribeRequest: SubscribeRequest = {
      entry: {
        entrySubscribe: {} // Subscribe to all entries
      },
      commitment: CommitmentLevel.CONFIRMED
    };
    ```

  </Tab>
  
  <Tab title="æ¡ç›®ç»“æ„">
    **ç†è§£æ¡ç›®æ•°æ®**
    
    æ¯ä¸ªæ¡ç›®åŒ…å«ï¼š
    
    - **æ§½ï¼š** æ¡ç›®æ‰€å±çš„æ§½
    - **ç´¢å¼•ï¼š** åœ¨æ§½ä¸­çš„ä½ç½®
    - **å“ˆå¸Œï¼š** å”¯ä¸€çš„æ¡ç›®æ ‡è¯†ç¬¦
    - **äº¤æ˜“ï¼š** æ¡ç›®ä¸­çš„äº¤æ˜“åˆ—è¡¨
    - **å“ˆå¸Œæ•°é‡ï¼š** å†å²è¯æ˜çš„å“ˆå¸Œè®¡æ•°
    
    **æ¡ç›®ä¸äº¤æ˜“ç›‘æ§ï¼š**
    - æ¡ç›®æ˜¾ç¤ºäº¤æ˜“çš„æ‰¹å¤„ç†å’Œæ’åº
    - æœ‰åŠ©äºç†è§£éªŒè¯è€…è¡Œä¸º
    - æ¯”å•ä¸ªäº¤æ˜“ç›‘æ§æ›´ä½çº§
  </Tab>
  
  <Tab title="ä½¿ç”¨æ¡ˆä¾‹">
    **ä½•æ—¶ä½¿ç”¨æ¡ç›®ç›‘æ§**
    
    - **æ€§èƒ½åˆ†æï¼š** ç†è§£äº¤æ˜“æ‰¹å¤„ç†æ•ˆç‡
    - **éªŒè¯è€…ç ”ç©¶ï¼š** ç ”ç©¶åŒºå—æ„å»ºæ¨¡å¼
    - **ç½‘ç»œè°ƒè¯•ï¼š** è°ƒæŸ¥å…±è¯†é—®é¢˜
    - **å­¦æœ¯ç ”ç©¶ï¼š** åˆ†æåŒºå—é“¾ç»“æ„
    - **æ³•è¯åˆ†æï¼š** è¯¦ç»†çš„äº¤æ˜“æ’åºè°ƒæŸ¥
    
    <Note>
    **ä¸æ¨èç”¨äºï¼š** æ ‡å‡†åº”ç”¨ç¨‹åºå¼€å‘ã€ç”¨æˆ·ç•Œé¢æˆ–ä¸šåŠ¡é€»è¾‘
    </Note>
  </Tab>
</Tabs>

## å®ç°ç¤ºä¾‹

### åŸºæœ¬æ¡ç›®ç›‘æ§

```typescript
import { StreamManager } from './stream-manager'; // From quickstart guide

async function monitorEntries() {
  const streamManager = new StreamManager(
    "your-grpc-endpoint",
    "your-api-key",
    handleEntryUpdate
  );

  const subscribeRequest: SubscribeRequest = {
    entry: {
      entrySubscribe: {} // Subscribe to all entries
    },
    commitment: CommitmentLevel.CONFIRMED
  };

  console.log('Starting entry monitoring...');
  await streamManager.connect(subscribeRequest);
}

function handleEntryUpdate(data: any): void {
  if (data.entry) {
    const entry = data.entry;
    
    console.log('\nğŸ“‹ Entry Details:');
    console.log(`  Slot: ${entry.slot}`);
    console.log(`  Index: ${entry.index || 'N/A'}`);
    console.log(`  Hash: ${entry.hash || 'N/A'}`);
    console.log(`  Num Hashes: ${entry.numHashes || 'N/A'}`);
    
    if (entry.transactions?.length > 0) {
      console.log(`\n  ğŸ“¦ Entry Transactions (${entry.transactions.length}):`);
      
      entry.transactions.forEach((tx: any, index: number) => {
        console.log(`    ${index + 1}. ${tx.signature || 'No signature'}`);
        console.log(`       Vote: ${tx.isVote ? 'Yes' : 'No'}`);
        
        // Show transaction status if available
        if (tx.meta) {
          const status = tx.meta.err ? 'Failed' : 'Success';
          console.log(`       Status: ${status}`);
          if (tx.meta.fee) {
            console.log(`       Fee: ${tx.meta.fee} lamports`);
          }
        }
      });
    } else {
      console.log(`  ğŸ“¦ No transactions in this entry`);
    }
    
    // Check if this is a tick entry (no transactions)
    if (entry.tick !== undefined) {
      console.log(`  â±ï¸  Tick Entry: ${entry.tick ? 'Yes' : 'No'}`);
    }
  }
}

// Start monitoring
monitorEntries().catch(console.error);
```

### æ¡ç›®åˆ†æç¤ºä¾‹

æ¡ç›®æ¨¡å¼çš„é«˜çº§åˆ†æï¼š

```typescript
let entryStats = {
  totalEntries: 0,
  totalTransactions: 0,
  tickEntries: 0,
  largestEntry: 0,
  slotsProcessed: new Set<number>()
};

function analyzeEntry(data: any): void {
  if (data.entry) {
    const entry = data.entry;
    entryStats.totalEntries++;
    entryStats.slotsProcessed.add(entry.slot);
    
    const txCount = entry.transactions?.length || 0;
    entryStats.totalTransactions += txCount;
    
    if (txCount === 0 || entry.tick) {
      entryStats.tickEntries++;
    }
    
    if (txCount > entryStats.largestEntry) {
      entryStats.largestEntry = txCount;
      console.log(`\nğŸ”¥ New largest entry: ${txCount} transactions in slot ${entry.slot}`);
    }
    
    // Log stats every 100 entries
    if (entryStats.totalEntries % 100 === 0) {
      console.log('\nğŸ“Š Entry Statistics:');
      console.log(`  Total Entries: ${entryStats.totalEntries}`);
      console.log(`  Total Transactions: ${entryStats.totalTransactions}`);
      console.log(`  Tick Entries: ${entryStats.tickEntries}`);
      console.log(`  Slots Processed: ${entryStats.slotsProcessed.size}`);
      console.log(`  Avg Tx/Entry: ${(entryStats.totalTransactions / entryStats.totalEntries).toFixed(2)}`);
      console.log(`  Largest Entry: ${entryStats.largestEntry} transactions`);
    }
  }
}
```

## æ¡ç›®æ•°æ®ç»“æ„

äº†è§£æ¡ç›®æ•°æ®æ ¼å¼ï¼š

<Accordion title="æ¡ç›®å­—æ®µ">

  ```typescript
  {
    slot: number;              // Slot number containing this entry
    index: number;             // Entry index within the slot
    hash: string;              // Entry hash (proof-of-history)
    numHashes: number;         // Number of hashes in PoH sequence
    transactions: Array<{      // Transactions in this entry
      signature: string;
      isVote: boolean;
      meta: {
        err: any;            // Error if transaction failed
        fee: number;         // Transaction fee
        // ... other transaction metadata
      };
    }>;
    tick: boolean;             // Whether this is a tick entry
  }
  ```

</Accordion>

<Accordion title="æ¡ç›®ä¸å…¶ä»–ç±»å‹">
  **æ¡ç›®ä¸äº¤æ˜“ï¼š**
  - æ¡ç›®å°†äº¤æ˜“åˆ†ç»„åœ¨ä¸€èµ·
  - æ˜¾ç¤ºæ‰§è¡Œé¡ºåºå’Œæ‰¹å¤„ç†
  - åŒ…å« PoHï¼ˆå†å²è¯æ˜ï¼‰ä¿¡æ¯
  
  **æ¡ç›®ä¸åŒºå—ï¼š**
  - åŒºå—åŒ…å«å¤šä¸ªæ¡ç›®
  - æ¡ç›®æ˜¯åŒºå—å†…çš„å­å•å…ƒ
  - åŒºå—æ·»åŠ å…±è¯†å’Œæœ€ç»ˆæ€§ä¿¡æ¯
  
  **æ¡ç›®ä¸æ§½ï¼š**
  - æ§½æ˜¯æ—¶é—´å•ä½ï¼ˆ400msï¼‰
  - æ¯ä¸ªæ§½å¯ä»¥å­˜åœ¨å¤šä¸ªæ¡ç›®
  - æ¡ç›®æ˜¾ç¤ºæ§½å†…å‘ç”Ÿçš„äº‹ä»¶
</Accordion>

## æ€§èƒ½è€ƒè™‘

<CardGroup cols={2}>
  <Card title="å®¹é‡ç‰¹æ€§" icon="chart-line">
    **é«˜é¢‘æ•°æ®æµ**
    
    - éå¸¸é«˜çš„æ¶ˆæ¯é€Ÿç‡
    - ç½‘ç»œæ´»åŠ¨æœŸé—´çš„è¿ç»­æµ
    - æ¯ä¸ªæ¡ç›®åŒ…å«å¤šä¸ªäº¤æ˜“
    - éœ€è¦é«˜æ•ˆå¤„ç†
  </Card>
  
  <Card title="å¤„ç†æ•ˆç‡" icon="gauge">
    **ä¼˜åŒ–æ€§èƒ½**
    
    - å¼‚æ­¥å¤„ç†æ¡ç›®
    - æ‰¹é‡æ¡ç›®åˆ†æ
    - ä¸“æ³¨äºç‰¹å®šæ•°æ®å­—æ®µ
    - å¯¹å¤§è§„æ¨¡åˆ†æä½¿ç”¨é‡‡æ ·
  </Card>
</CardGroup>

## å¸¸è§ç”¨ä¾‹

<Tabs>
  <Tab title="æ€§èƒ½åˆ†æ">
    **åˆ†æäº¤æ˜“æ‰¹å¤„ç†æ•ˆç‡**
    

    ```typescript
    function analyzeBatching(entry: any): void {
      const txCount = entry.transactions?.length || 0;
      
      if (txCount > 50) {
        console.log(`Large batch: ${txCount} transactions in entry ${entry.index}`);
      }
      
      // Track batching patterns
      const batchSizes = new Map<number, number>();
      const currentCount = batchSizes.get(txCount) || 0;
      batchSizes.set(txCount, currentCount + 1);
    }
    ```

  </Tab>
  
  <Tab title="éªŒè¯è€…ç ”ç©¶">
    **ç ”ç©¶åŒºå—æ„å»ºæ¨¡å¼**
    

    ```typescript
    function studyValidatorBehavior(entry: any): void {
      // Analyze entry timing and structure
      const hasVoteTransactions = entry.transactions?.some((tx: any) => tx.isVote);
      const hasRegularTransactions = entry.transactions?.some((tx: any) => !tx.isVote);
      
      if (hasVoteTransactions && hasRegularTransactions) {
        console.log(`Mixed entry: votes and regular transactions in slot ${entry.slot}`);
      }
    }
    ```

  </Tab>
  
  <Tab title="ç½‘ç»œè°ƒè¯•">
    **è°ƒæŸ¥å…±è¯†é—®é¢˜**
    

    ```typescript
    function debugNetworkIssues(entry: any): void {
      // Look for anomalies in entry structure
      if (entry.transactions?.length === 0 && !entry.tick) {
        console.log(`Empty non-tick entry in slot ${entry.slot}`);
      }
      
      // Track entry gaps or irregularities
      if (entry.numHashes && entry.numHashes > 1000) {
        console.log(`High hash count: ${entry.numHashes} in slot ${entry.slot}`);
      }
    }
    ```

  </Tab>
</Tabs>

## è¿‡æ»¤å’Œä¼˜åŒ–

æ¡ç›®ç›‘æ§ç›®å‰ä¸æ”¯æŒç‰¹å®šè¿‡æ»¤å™¨ï¼Œå› æ­¤æ‰€æœ‰æ¡ç›®éƒ½è¢«æµå¼ä¼ è¾“ã€‚ä¸ºç®¡ç†æ­¤æƒ…å†µï¼š

<Note>
**ä¼˜åŒ–ç­–ç•¥ï¼š**

- **å®¢æˆ·ç«¯è¿‡æ»¤ï¼š** ä»…å¤„ç†ç¬¦åˆæ‚¨æ¡ä»¶çš„æ¡ç›®
- **é‡‡æ ·ï¼š** åˆ†ææ¯ç¬¬ N ä¸ªæ¡ç›®ä»¥è¿›è¡Œç»Ÿè®¡åˆ†æ
- **åŸºäºæ—¶é—´çš„åˆ†æï¼š** ä¸“æ³¨äºç‰¹å®šæ—¶é—´æ®µ
- **åŸºäºæ§½ä½çš„è¿‡æ»¤ï¼š** ä»…å¤„ç†æ¥è‡ªæŸäº›æ§½ä½çš„æ¡ç›®
- **äº¤æ˜“ç±»å‹è¿‡æ»¤ï¼š** ä¸“æ³¨äºå…·æœ‰ç‰¹å®šäº¤æ˜“ç±»å‹çš„æ¡ç›®
</Note>

å®¢æˆ·ç«¯è¿‡æ»¤ç¤ºä¾‹ï¼š

```typescript
function handleFilteredEntries(data: any): void {
  if (data.entry) {
    const entry = data.entry;
    
    // Only process entries with transactions
    if (entry.transactions?.length > 0) {
      // Only process entries with non-vote transactions
      const hasNonVoteTransactions = entry.transactions.some((tx: any) => !tx.isVote);
      
      if (hasNonVoteTransactions) {
        processImportantEntry(entry);
      }
    }
  }
}
```

## æœ€ä½³å®è·µ

<Accordion title="ä½•æ—¶ä½¿ç”¨æ¡ç›®ç›‘æ§">
  **é€‚ç”¨åœºæ™¯ï¼š**
  - æ·±åº¦åŒºå—é“¾åˆ†æå’Œç ”ç©¶
  - éªŒè¯å™¨æ€§èƒ½ç ”ç©¶
  - ç½‘ç»œè°ƒè¯•å’Œå–è¯
  - å­¦æœ¯åŒºå—é“¾ç ”ç©¶
  - ç†è§£ PoH æœºåˆ¶
  
  **ä¸é€‚ç”¨åœºæ™¯ï¼š**
  - æ ‡å‡†åº”ç”¨ç¨‹åºå¼€å‘
  - é¢å‘ç”¨æˆ·çš„åŠŸèƒ½
  - ä¸šåŠ¡é€»è¾‘å®ç°
  - å®æ—¶äº¤æ˜“åº”ç”¨ç¨‹åº
</Accordion>

<Accordion title="æ€§èƒ½æŒ‡å—">
  **å¤„ç†é«˜å®¹é‡æ•°æ®ï¼š**
  - å®æ–½é«˜æ•ˆçš„æ•°æ®å¤„ç†
  - ä½¿ç”¨å¼‚æ­¥å¤„ç†æ¨¡å¼
  - è€ƒè™‘æ•°æ®é‡‡æ ·è¿›è¡Œåˆ†æ
  - ç›‘æ§å†…å­˜ä½¿ç”¨å¹¶è¿›è¡Œæ¸…ç†
  - å®æ–½èƒŒå‹å¤„ç†
</Accordion>

<Accordion title="åˆ†ææŠ€æœ¯">
  **æœ‰æ•ˆçš„æ¡ç›®åˆ†æï¼š**
  - ä¸“æ³¨äºç‰¹å®šæŒ‡æ ‡
  - ä½¿ç”¨ç»Ÿè®¡é‡‡æ ·
  - å®æ–½æ»šåŠ¨å¹³å‡
  - è·Ÿè¸ªéšæ—¶é—´å˜åŒ–çš„æ¨¡å¼
  - ä¸å…¶ä»–åŒºå—é“¾æ•°æ®ç›¸å…³è”
</Accordion>

## æ•…éšœæ’é™¤

<Accordion title="é«˜æ•°æ®é‡">
  **é—®é¢˜ï¼š** æ¡ç›®æµé‡è¿‡å¤§
  
  **è§£å†³æ–¹æ¡ˆï¼š**
  - å®æ–½å®¢æˆ·ç«¯è¿‡æ»¤
  - ä½¿ç”¨æ•°æ®é‡‡æ ·æŠ€æœ¯
  - å¼‚æ­¥å¤„ç†æ¡ç›®
  - ç›‘æ§ç³»ç»Ÿèµ„æº
  - è€ƒè™‘æ›¿ä»£ç›‘æ§æ–¹æ³•
</Accordion>

<Accordion title="ç¼ºå°‘ä¸Šä¸‹æ–‡">
  **é—®é¢˜ï¼š** éœ€è¦é¢å¤–çš„äº¤æ˜“ä¸Šä¸‹æ–‡
  
  **è§£å†³æ–¹æ¡ˆï¼š**
  - ç»“åˆäº¤æ˜“ç›‘æ§
  - ä¸è´¦æˆ·æ›´æ–°äº¤å‰å¼•ç”¨
  - ä½¿ç”¨åŒºå—ç›‘æ§è·å–æ›´å¹¿æ³›çš„ä¸Šä¸‹æ–‡
  - ç»´æŠ¤æœ¬åœ°çŠ¶æ€è·Ÿè¸ª
</Accordion>

## ä¸‹ä¸€æ­¥

<CardGroup cols={2}>
  <Card title="å®Œæˆæ‚¨çš„å­¦ä¹ " icon="graduation-cap" href="/grpc/stream-pump-amm-data">
    é«˜çº§çœŸå®ç¤ºä¾‹ï¼šæµæ³µ AMM æ•°æ®
  </Card>
  <Card title="æ¢ç´¢å…¶ä»–ç›‘æ§" icon="receipt" href="/grpc/transaction-monitoring">
    è¿”å›äº¤æ˜“ç›‘æ§ä»¥è·å–å®é™…åº”ç”¨
  </Card>
</CardGroup>

<Note>
**è¯·è®°ä½ï¼š** å…¥å£ç›‘æ§æ˜¯ç”¨äºé«˜çº§åŒºå—é“¾åˆ†æçš„ä¸“ä¸šå·¥å…·ã€‚å¯¹äºå¤§å¤šæ•°åº”ç”¨ç¨‹åºï¼Œäº¤æ˜“ã€è´¦æˆ·æˆ–åŒºå—ç›‘æ§å°†æ›´åˆé€‚ä¸”æ›´é«˜æ•ˆã€‚
</Note>
