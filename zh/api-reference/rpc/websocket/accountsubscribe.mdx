---
title: accountSubscribe
og:title: accountSubscribe Solana RPC 方法
sidebarTitle: accountSubscribe
description: 订阅一个账户，以便在给定账户公钥的 lamports 或数据发生变化时接收通知。
og:description: 获取免费的 RPC 并探索 accountSubscribe RPC 方法。包括请求参数、响应示例、代码片段，以及在
  Solana 主网和 Devnet 中的浏览器测试。
---

## 端点

主网和 devnet 上可用的 Websockets URL 如下：

- **Mainnet** `wss://mainnet.helius-rpc.com/?api-key=<API_KEY>`
- **Devnet** `wss://devnet.helius-rpc.com/?api-key=<API_KEY>`

<Note>Websockets 有一个 10 分钟的不活动计时器；强烈建议实施健康检查并每分钟发送 ping 以保持 websocket 连接活跃。</Note>

## 授权

<ParamField query="api-key" type="string" required>
  您的 Helius API 密钥。您可以在[仪表板](https://dashboard.helius.dev/api-keys)中免费获取一个。
</ParamField>

## 请求体

<ParamField body="params" type="array" required>
    <Expandable title="properties" defaultOpen>
        <ParamField body="pubkey" type="string" required>
            账户公钥，作为 base-58 编码的字符串。
        </ParamField>

        <ParamField body="encoding" type="string">
            账户数据的编码格式。可以是 `base58`, `base64`, `base64+zstd`, 或 `jsonParsed`。
        </ParamField>

            - `base58` 是慢的
            - `jsonParsed` 编码尝试使用特定于程序的状态解析器来返回更具可读性和明确的账户状态数据
            - 如果请求了 `jsonParsed` 但找不到解析器，则该字段会回退到二进制编码，当数据字段为字符串类型时可检测到。
        </ParamField>

        <ParamField body="commitment" type="string">
            订阅的承诺级别。可以是 `finalized`, `confirmed`, 或 `processed`。
        </ParamField>
    </Expandable>
</ParamField>

## 响应

<ResponseField name="result" type="integer">
  订阅 ID（用于取消订阅）
</ResponseField>

<RequestExample>

```json Request
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "accountSubscribe",
  "params": [
    "CM78CPUeXjn8o3yroDHxUtKsZZgoy4GPkPPXfouKNH12",
    {
      "encoding": "jsonParsed",
      "commitment": "finalized"
    }
  ]
}
```

</RequestExample>

<ResponseExample>

```json Response
{
  "jsonrpc": "2.0",
  "result": 23784,
  "id": 1
}
```

```json Message (base58)
{
  "jsonrpc": "2.0",
  "method": "accountNotification",
  "params": {
    "result": {
      "context": {
        "slot": 5199307
      },
      "value": {
        "data": [
          "11116bv5nS2h3y12kD1yUKeMZvGcKLSjQgX6BeV7u1FrjeJcKfsHPXHRDEHrBesJhZyqnnq9qJeUuF7WHxiuLuL5twc38w2TXNLxnDbjmuR",
          "base58"
        ],
        "executable": false,
        "lamports": 33594,
        "owner": "11111111111111111111111111111111",
        "rentEpoch": 635,
        "space": 80
      }
    },
    "subscription": 23784
  }
}
```

```json Message (jsonParsed)
{
  "jsonrpc": "2.0",
  "method": "accountNotification",
  "params": {
    "result": {
      "context": {
        "slot": 5199307
      },
      "value": {
        "data": {
          "program": "nonce",
          "parsed": {
            "type": "initialized",
            "info": {
              "authority": "Bbqg1M4YVVfbhEzwA9SpC9FhsaG83YMTYoR4a8oTDLX",
              "blockhash": "LUaQTmM7WbMRiATdMMHaRGakPtCkc2GHtH57STKXs6k",
              "feeCalculator": {
                "lamportsPerSignature": 5000
              }
            }
          }
        },
        "executable": false,
        "lamports": 33594,
        "owner": "11111111111111111111111111111111",
        "rentEpoch": 635,
        "space": 80
      }
    },
    "subscription": 23784
  }
}
```

</ResponseExample>
