---
title: blockSubscribe
og:title: blockSubscribe Solana RPC 方法
sidebarTitle: blockSubscribe
description: 订阅以在新块被{/* INLINE_CODE_PLACEHOLDER_44c9cbaea163987171667729a75b03f9
  */}或`finalized`时接收通知。
og:description: 获取免费的 RPC 并探索 blockSubscribe RPC 方法。包括请求参数、响应示例、代码片段以及 Solana 主网和开发网的浏览器内测试。
---

<Note>
此订阅被视为**不稳定**，仅在验证器以`--rpc-pubsub-enable-block-subscription`标志启动时可用。此订阅的格式将来可能会更改。
</Note>

<Warning>
这是一个不稳定的 RPC 方法，**Helius 不支持**。此文档仅供参考。
</Warning>

## 端点

主网和开发网上可用 Websockets，使用以下 URL：

- **Mainnet** `wss://mainnet.helius-rpc.com/?api-key=<API_KEY>`
- **Devnet** `wss://devnet.helius-rpc.com/?api-key=<API_KEY>`

<Note>Websockets 有 10 分钟的不活动计时器；强烈建议实施健康检查并每分钟发送 ping 以保持 websocket 连接活跃。</Note>

## 授权

<ParamField query="api-key" type="string" required>
  您的 Helius API 密钥。您可以在[仪表板](https://dashboard.helius.dev/api-keys)中免费获取一个。
</ParamField>

## 正文

<ParamField body="params" type="array" required>
    <Expandable title="properties" defaultOpen>
        <ParamField body="filter" type="string | object" required>
            日志的过滤条件，以根据账户类型接收结果；当前支持：
            - `all` - 包含块中的所有交易
            - 一个包含以下字段的JSON对象：
              - `mentionsAccountOrProgram: <string>` - 仅返回提到提供的公钥（作为base-58编码字符串）的交易。如果在给定块中没有提到，则不会发送通知。
        </ParamField>

        <ParamField body="config" type="object">
            包含以下字段的配置对象：
            
            <ParamField body="commitment" type="string">
                订阅的承诺级别。可以是`finalized`、`confirmed`或`processed`。
            </ParamField>
            
            <ParamField body="encoding" type="string">
                交易数据的编码格式。
            </ParamField>
            
            <ParamField body="transactionDetails" type="string">
                返回的交易细节级别。
            </ParamField>
            
            <ParamField body="maxSupportedTransactionVersion" type="number">
                响应中返回的最大交易版本。
            </ParamField>
            
            <ParamField body="showRewards" type="boolean">
                是否在响应中显示奖励。
            </ParamField>
        </ParamField>
    </Expandable>
</ParamField>

## 响应

<ResponseField name="result" type="integer">
  订阅ID（取消订阅时需要）
</ResponseField>

## 通知格式

通知将是一个包含以下字段的对象：
- `slot: <u64>` - 对应的槽位。
- `err: <object|null>` - 如果发布通知时出现问题则为错误，否则为null。
- `block: <object|null>` - 一个块对象，如在`getBlock` RPC HTTP方法中所见。

<RequestExample>

{/* 代码占位符_d0e983ca8da3adb6c03e55bfc0048c33 */}

</RequestExample>

<ResponseExample>

{/* 代码占位符_7e5a019e03cd8517646d3a56c93bb91b */}

{/* 代码占位符_cbf0b64559e6bbf1892b898710aea6d2 */}

</ResponseExample>