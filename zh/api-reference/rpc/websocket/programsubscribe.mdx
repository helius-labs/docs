---
title: programSubscribe
og:title: programSubscribe Solana RPC 方法
sidebarTitle: programSubscribe
description: 订阅一个程序，以便在由给定程序拥有的账户的 lamports 或数据发生变化时接收通知。
og:description: 获取免费的 RPC 并探索 programSubscribe RPC 方法。包括请求参数、响应示例、代码片段，以及 Solana
  主网和 Devnet 的浏览器内测试。
---

## 端点

主网和 devnet 上可用的 Websockets URL 如下：

- **Mainnet** `wss://mainnet.helius-rpc.com/?api-key=<API_KEY>`
- **Devnet** `wss://devnet.helius-rpc.com/?api-key=<API_KEY>`

<Note>Websockets 有一个 10 分钟的不活动计时器；强烈建议实施健康检查并每分钟发送 ping 以保持 websocket 连接活跃。</Note>

## 授权

<ParamField query="api-key" type="string" required>
  您的 Helius API 密钥。您可以在[仪表板](https://dashboard.helius.dev/api-keys)中免费获取一个。
</ParamField>

## 请求体

<ParamField body="params" type="array" required>
    <Expandable title="properties" defaultOpen>
        <ParamField body="programId" type="string" required>
            `program_id`的公钥，作为base-58编码的字符串。
        </ParamField>

        <ParamField body="config" type="object">
            包含以下字段的配置对象：
            
            <ParamField body="commitment" type="string">
                订阅的承诺级别。可以是`finalized`, `confirmed`，或`processed`。
            </ParamField>
            
            <ParamField body="filters" type="array">
                要应用的过滤器对象数组。
            </ParamField>
            
            <ParamField body="encoding" type="string">
                账户数据的编码格式。可以是`base58`, `base64`, `base64+zstd`，或`jsonParsed`。
                
                - `base58`速度较慢
                - `jsonParsed`编码尝试使用程序特定的状态解析器返回更具可读性和明确的账户状态数据
                - 如果请求`jsonParsed`但找不到解析器，则字段会回退到二进制编码，当数据字段为字符串类型时可检测到。
            </ParamField>
        </ParamField>
    </Expandable>
</ParamField>

## 响应

<ResponseField name="result" type="integer">
  订阅 ID（需要取消订阅）
</ResponseField>

## 通知格式

通知格式是一个**单一**的程序账户对象，如在`getProgramAccounts` RPC HTTP方法中所见。

<RequestExample>

```json Request
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "programSubscribe",
  "params": [
    "11111111111111111111111111111111",
    {
      "encoding": "base64",
      "filters": [{ "dataSize": 80 }]
    }
  ]
}
```

</RequestExample>

<ResponseExample>

```json Response
{
  "jsonrpc": "2.0",
  "result": 24040,
  "id": 1
}
```

```json Notification (base58)
{
  "jsonrpc": "2.0",
  "method": "programNotification",
  "params": {
    "result": {
      "context": {
        "slot": 5208469
      },
      "value": {
        "pubkey": "H4vnBqifaSACnKa7acsxstsY1iV1bvJNxsCY7enrd1hq",
        "account": {
          "data": [
            "11116bv5nS2h3y12kD1yUKeMZvGcKLSjQgX6BeV7u1FrjeJcKfsHPXHRDEHrBesJhZyqnnq9qJeUuF7WHxiuLuL5twc38w2TXNLxnDbjmuR",
            "base58"
          ],
          "executable": false,
          "lamports": 33594,
          "owner": "11111111111111111111111111111111",
          "rentEpoch": 636,
          "space": 80
        }
      }
    },
    "subscription": 24040
  }
}
```

```json Notification (jsonParsed)
{
  "jsonrpc": "2.0",
  "method": "programNotification",
  "params": {
    "result": {
      "context": {
        "slot": 5208469
      },
      "value": {
        "pubkey": "H4vnBqifaSACnKa7acsxstsY1iV1bvJNxsCY7enrd1hq",
        "account": {
          "data": {
            "program": "nonce",
            "parsed": {
              "type": "initialized",
              "info": {
                "authority": "Bbqg1M4YVVfbhEzwA9SpC9FhsaG83YMTYoR4a8oTDLX",
                "blockhash": "LUaQTmM7WbMRiATdMMHaRGakPtCkc2GHtH57STKXs6k",
                "feeCalculator": {
                  "lamportsPerSignature": 5000
                }
              }
            }
          },
          "executable": false,
          "lamports": 33594,
          "owner": "11111111111111111111111111111111",
          "rentEpoch": 636,
          "space": 80
        }
      }
    },
    "subscription": 24040
  }
}
```

</ResponseExample>