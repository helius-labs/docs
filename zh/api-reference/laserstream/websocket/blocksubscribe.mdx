---
title: blockSubscribe
description: 订阅以在新块被 {/*
  INLINE_CODE_PLACEHOLDER_44c9cbaea163987171667729a75b03f9 */} 或 {/*
  INLINE_CODE_PLACEHOLDER_8fe8e1d53a8714fd8d7b1c6c3fd7640c */} 时接收通知。
---

<Note>
此订阅被认为是**不稳定的**，仅在验证器以 `--rpc-pubsub-enable-block-subscription` 标志启动时可用。此订阅的格式将来可能会更改。
</Note>

## 端点

主网和开发网都可以通过以下 URL 使用 Websockets：

- **Mainnet** `wss://laserstream-mainnet.helius-rpc.com/?api-key=<API_KEY>`
- **Devnet** `wss://laserstream-devnet.helius-rpc.com/?api-key=<API_KEY>`

<Note>Websockets 有一个 10 分钟的不活动计时器；强烈建议实施健康检查并每分钟发送 ping 以保持 websocket 连接活跃。</Note>

## 授权

<ParamField query="api-key" type="string" required>
  您的 Helius API 密钥。您可以在[仪表板](https://dashboard.helius.dev/api-keys)中免费获取一个。
</ParamField>

## 正文

<ParamField body="params" type="array" required>
    <Expandable title="properties" defaultOpen>
        <ParamField body="filter" type="string | object" required>
            日志的过滤条件，以按账户类型接收结果；当前支持：
            - `all` - 包含块中的所有交易
            - 一个包含以下字段的 JSON 对象：
              - `mentionsAccountOrProgram: <string>` - 仅返回提到提供的公钥（作为 base-58 编码字符串）的交易。如果在给定块中没有提到，则不会发送通知。
        </ParamField>

        <ParamField body="config" type="object">
            包含以下字段的配置对象：
            
            <ParamField body="commitment" type="string">
                订阅的承诺级别。可以是 `finalized`, `confirmed`, 或 `processed`。
            </ParamField>
            
            <ParamField body="encoding" type="string">
                交易数据的编码格式。
            </ParamField>
            
            <ParamField body="transactionDetails" type="string">
                返回的交易详细级别。
            </ParamField>
            
            <ParamField body="maxSupportedTransactionVersion" type="number">
                响应中返回的最大交易版本。
            </ParamField>
            
            <ParamField body="showRewards" type="boolean">
                是否在响应中显示奖励。
            </ParamField>
        </ParamField>
    </Expandable>
</ParamField>

## 响应

<ResponseField name="result" type="integer">
  订阅ID（取消订阅时需要）
</ResponseField>

## 通知格式

通知将是一个包含以下字段的对象：
- `slot: <u64>` - 对应的槽位。
- `err: <object|null>` - 如果发布通知时出现问题则为错误，否则为 null。
- `block: <object|null>` - 一个块对象，如在 `getBlock` RPC HTTP 方法中所见。

<RequestExample>

{/* 代码占位符_d0e983ca8da3adb6c03e55bfc0048c33 */}

</RequestExample>

<ResponseExample>

{/* 代码占位符_7e5a019e03cd8517646d3a56c93bb91b */}

{/* 代码占位符_cbf0b64559e6bbf1892b898710aea6d2 */}

</ResponseExample>