---
title: 如何使用 getSignaturesForAddress
sidebarTitle: getSignaturesForAddress
description: 了解 getSignaturesForAddress 的使用案例、代码示例、请求参数、响应结构和提示。
---

[`getSignaturesForAddress`](https://www.helius.dev/docs/api-reference/rpc/http/getsignaturesforaddress) RPC 方法允许您检索涉及特定账户地址的已确认交易签名列表。这对于获取账户的交易历史非常有用。签名按时间倒序返回（最新的在前）。

<Warning>
**不支持批处理**

此归档方法不支持批处理。请仅进行单独请求。
</Warning>

## 常见用例

* **账户交易历史：** 显示用户钱包的过去交易记录。对于更高级的交易历史解析，请考虑使用Helius的[增强交易API](https://www.helius.dev/docs/enhanced-transactions)。
* **活动审计：** 审查与特定智能合约或账户相关的所有交易。
* **特定交易查找：** 如果只知道相关地址，通过遍历账户历史来查找特定交易。
* **数据索引：** 构建本地化的交易索引以加快查询和分析。

## 请求参数

1. **`address`** (`string`)：（必需）要检索交易签名的账户的base-58编码公钥。
2. **`options`** (`object`，可选)：一个可选的配置对象，包含以下字段：
 * **`limit`** (`number`，可选)：要返回的最大签名数量。默认是1000，最大允许是1000。
 * **`before`** (`string`，可选)：一个base-58编码的交易签名。如果提供，查询将从此签名之前开始搜索交易。
 * **`until`** (`string`，可选)：一个base-58编码的交易签名。如果提供，查询将搜索到达此签名为止的交易（不包括此签名）。
 * **`commitment`** (`string`，可选)：指定用于查询的[承诺级别](https://www.helius.dev/blog/solana-commitment-levels)。支持的值是`finalized`，`confirmed`，或`processed`。如果省略，将使用RPC节点的默认承诺（通常是`finalized`）。
 * **`minContextSlot`** (`number`，可选)：请求可以评估的最小槽位。这不是对历史交易的过滤，而是为节点的上下文设置最小槽位。

## 响应结构

JSON-RPC 响应的 `result` 字段是一个签名信息对象的数组。每个对象具有以下结构：

* **`signature`** (`string`)：Base-58 编码的交易签名。

* **`slot`** (`u64`)：交易被处理的槽位。

* **`err`** (`object` | `null`)：如果交易失败则为错误对象，成功则为 `null`。

* **`memo`** (`string` | `null`)：与交易相关的备忘录（如果有）。

* **`blockTime`** (`i64` | `null`)：包含交易的区块的估计生产时间，以 Unix 时间戳表示（自纪元以来的秒数）。如果不可用则为 `null`。

* **`confirmationStatus`** (`string` | `null`)：交易的确认状态（例如，`processed`，`confirmed`，`finalized`）。如果不可用（例如，对于较旧的 Helius 响应）则为 `null`。

## 示例

### 1. 获取地址的最新签名

此示例获取给定地址的最近（最多 1000 个）交易签名。

<CodeGroup>

```bash cURL
# Replace <api-key> with your Helius API key
# Replace SYSTEM_PROGRAM_ID with the address you want to query
curl https://mainnet.helius-rpc.com/?api-key=<api-key> -X POST -H "Content-Type: application/json" -d \
  '{
    "jsonrpc": "2.0",
    "id": 1,
    "method": "getSignaturesForAddress",
    "params": [
      "11111111111111111111111111111111" 
    ]
  }'
```

```javascript JavaScript (using @solana/web3.js)
// Replace <api-key> with your Helius API key
const { Connection, PublicKey } = require('@solana/web3.js');

async function getLatestSignatures() {
  const connection = new Connection('https://mainnet.helius-rpc.com/?api-key=<api-key>');
  // Replace with the public key you want to query
  const address = new PublicKey('11111111111111111111111111111111'); 

  try {
    const signatures = await connection.getSignaturesForAddress(address);
    if (signatures && signatures.length > 0) {
      console.log(`Found ${signatures.length} signatures:`);
      signatures.forEach((sigInfo, index) => {
        console.log(`--- Signature ${index + 1} ---`);
        console.log(`  Signature: ${sigInfo.signature}`);
        console.log(`  Slot: ${sigInfo.slot}`);
        console.log(`  Block Time: ${sigInfo.blockTime ? new Date(sigInfo.blockTime * 1000).toLocaleString() : 'N/A'}`);
        console.log(`  Error: ${JSON.stringify(sigInfo.err)}`);
        console.log(`  Memo: ${sigInfo.memo || 'N/A'}`);
        console.log(`  Confirmation Status: ${sigInfo.confirmationStatus || 'N/A'}`);
      });
    } else {
      console.log('No signatures found for this address.');
    }
  } catch (error) {
    console.error('Error fetching signatures:', error);
  }
}

getLatestSignatures();
```

</CodeGroup>

### 2. 获取有限制的签名

此示例获取指定数量的地址的最近交易签名。

<CodeGroup>

```bash cURL
# Replace <api-key> with your Helius API key
# Replace TARGET_ACCOUNT_ADDRESS with the address you want to query
curl https://mainnet.helius-rpc.com/?api-key=<api-key> -X POST -H "Content-Type: application/json" -d \
  '{
    "jsonrpc": "2.0",
    "id": 1,
    "method": "getSignaturesForAddress",
    "params": [
      "TARGET_ACCOUNT_ADDRESS",
      {
        "limit": 5 
      }
    ]
  }'
```

```javascript JavaScript (using @solana/web3.js)
// Replace <api-key> with your Helius API key
const { Connection, PublicKey } = require('@solana/web3.js');

async function getLimitedSignatures() {
  const connection = new Connection('https://mainnet.helius-rpc.com/?api-key=<api-key>');
  // Replace with the public key you want to query
  const address = new PublicKey('Vote111111111111111111111111111111111111111'); 
  const limit = 5;

  try {
    const signatures = await connection.getSignaturesForAddress(address, { limit });
    console.log(`Fetched up to ${limit} signatures:`);
    signatures.forEach((sigInfo, index) => {
      console.log(`${index + 1}. Signature: ${sigInfo.signature}, Slot: ${sigInfo.slot}`);
    });
  } catch (error) {
    console.error(`Error fetching limited signatures for ${address.toBase58()}:`, error);
  }
}

getLimitedSignatures();
```

</CodeGroup>

### 3. 分页获取交易历史

此示例演示如何使用 `before` 参数分批获取交易历史。

<CodeGroup>

通过使用`getSignaturesForAddress`及其分页选项，您可以有效地检索和管理任何Solana地址的交易历史。