---
title: 如何使用 getStakeMinimumDelegation
sidebarTitle: getStakeMinimumDelegation
description: 了解 getStakeMinimumDelegation 的使用案例、代码示例、请求参数、响应结构和提示。
---

[`getStakeMinimumDelegation`](https://www.helius.dev/docs/api-reference/rpc/http/getstakeminimumdelegation) RPC 方法返回在 Solana 网络上创建新的 [stake](https://www.helius.dev/blog/how-to-stake-solana) 委托所需的当前最小 lamports 数量。由于网络治理或更新，此值可能会随时间变化。

## 常见用例

*   **验证质押金额：** 在创建新的质押账户或委托质押之前，检查此值以确保预期的委托符合最低要求。
*   **质押 UI/UX：** 在质押界面中向用户显示最小委托金额以指导他们的输入。
*   **自动质押脚本：** 确保自动质押过程使用有效的委托金额。

## 请求参数

此方法有一个可选参数：

1.  **`config`** (object, optional): 包含以下字段的配置对象：
    *   **`commitment`** (string, optional): 指定查询值时使用的[承诺级别](https://www.helius.dev/blog/solana-commitment-levels)。如果省略，则使用 RPC 节点的默认承诺（通常为 `finalized`）。

## 响应结构

JSON-RPC 响应的 `result` 字段是一个包含以下内容的 `RpcResponse` 对象：

*   **`context`** (object): 一个包含以下字段的 `RpcResponseContext` 对象：
    *   **`slot`** (`u64`): 数据检索时的槽位。
*   **`value`** (`u64`): 以 lamports 为单位的最小 stake 委托金额。

**示例响应：**

```json
{
  "jsonrpc": "2.0",
  "result": {
    "context": { "slot": 123456789 },
    "value": 1000000000 // Represents 1 SOL, for example
  },
  "id": 1
}
```

## 示例

### 1. 获取当前质押最小委托

此示例使用默认承诺获取当前最小质押委托金额。

<CodeGroup>

```bash cURL
# Replace <api-key> with your Helius API key
curl https://mainnet.helius-rpc.com/?api-key=<api-key> -X POST -H "Content-Type: application/json" -d \
  '{
    "jsonrpc": "2.0",
    "id": 1,
    "method": "getStakeMinimumDelegation"
  }'
```

```javascript JavaScript (using @solana/web3.js)
// Replace <api-key> with your Helius API key
const { Connection } = require('@solana/web3.js');

async function getMinimumDelegation() {
  const connection = new Connection('https://mainnet.helius-rpc.com/?api-key=<api-key>');
  try {
    const minDelegation = await connection.getStakeMinimumDelegation();
    console.log(`Current minimum stake delegation: ${minDelegation} lamports`);
    // The raw response includes context:
    // const fullResponse = await connection.getStakeMinimumDelegation('confirmed'); // Example with commitment
    // console.log(JSON.stringify(fullResponse, null, 2));
  } catch (error) {
    console.error('Error fetching stake minimum delegation:', error);
  }
}

getMinimumDelegation();
```

</CodeGroup>

### 2. 获取具有特定承诺的质押最小委托

<CodeGroup>

```bash cURL
# Replace <api-key> with your Helius API key
curl https://mainnet.helius-rpc.com/?api-key=<api-key> -X POST -H "Content-Type: application/json" -d \
  '{
    "jsonrpc": "2.0",
    "id": 1,
    "method": "getStakeMinimumDelegation",
    "params": [
      {
        "commitment": "confirmed"
      }
    ]
  }'
```

```javascript JavaScript (using @solana/web3.js)
// Replace <api-key> with your Helius API key
const { Connection } = require('@solana/web3.js');

async function getMinimumDelegationConfirmed() {
  const connection = new Connection('https://mainnet.helius-rpc.com/?api-key=<api-key>');
  try {
    const minDelegationResponse = await connection.getStakeMinimumDelegation('confirmed');
    console.log(`Confirmed minimum stake delegation: ${minDelegationResponse.value} lamports at slot ${minDelegationResponse.context.slot}`);
  } catch (error) {
    console.error('Error fetching confirmed stake minimum delegation:', error);
  }
}

getMinimumDelegationConfirmed();
```

</CodeGroup>

## 开发者提示

*   **Lamports 与 SOL:** 返回的值以 lamports 为单位。请记住 1 SOL = 1,000,000,000 lamports。
*   **动态值:** 最小委托金额可能会因网络参数而变化。建议定期查询此值或在关键操作前查询，而不是硬编码它。通过我们的详细指南了解更多关于 [staking](https://www.helius.dev/blog/how-to-stake-solana) 的信息。
*   **承诺级别:** 使用不同的承诺级别可能会影响返回值的最新程度。`finalized` 提供了最大的确定性，而 `processed` 可能会给出尚未被集群完全确认的较新值。

本指南应帮助您有效使用 `getStakeMinimumDelegation` RPC 方法来检索 Solana 上所需的最小 stake 委托。