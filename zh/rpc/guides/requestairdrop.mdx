---
title: 如何使用 requestAirdrop
sidebarTitle: requestAirdrop
description: 了解 requestAirdrop 的使用案例、代码示例、请求参数、响应结构和提示。
---

[`requestAirdrop`](https://www.helius.dev/docs/api-reference/rpc/http/requestairdrop) RPC 方法允许您请求将 SOL（lamports）空投到指定账户。此方法**仅适用于非主网环境**，如 Devnet 和 Testnet，在这些环境中，它作为一个水龙头为开发者提供免费的 SOL 以测试他们的应用程序。

**重要提示：此方法在 Mainnet Beta 上无效。**

## 常见用例

*   **资助测试钱包：**获取 SOL 以支付交易费用并在 Devnet 或 Testnet 上部署程序。
*   **自动化测试：**脚本可以使用 `requestAirdrop` 确保测试账户在运行测试套件之前有足够的 SOL。
*   **开发与实验：**快速获取 SOL 以在开发过程中与链上程序交互。

## 请求参数

1.  **`pubkey`**（字符串，必需）：接收空投 lamports 的账户的公钥，以 base-58 编码字符串提供。
2.  **`lamports`**（u64，必需）：请求的 lamports 数量。（1 SOL = 1,000,000,000 lamports）。
3.  **`options`**（对象，可选）：一个可选的配置对象，可以包括：
    *   **`commitment`**（字符串，可选）：指定在确认空投交易时等待的[承诺级别](https://www.helius.dev/blog/solana-commitment-levels)（例如，`"finalized"`，`"confirmed"`，`"processed"`）。如果省略，将使用节点的默认空投承诺。

## 响应结构

JSON-RPC 响应中的 `result` 字段是一个表示空投交易签名的字符串，使用 base-58 编码。

**示例响应：**

```json
{
  "jsonrpc": "2.0",
  "result": "5VERv8NMvzbJMEkV8xnrLkEaWRtSz9CosKDYjCJjBRnbJLgp8uirBgmQpjKhoR4tjF3ZpRzrFmBV6UjKdiSZkQUW",
  "id": 1
}
```

此签名可以与 `getTransaction` 或 Solana 浏览器一起使用，以跟踪空投交易的状态。

## 代码示例

<CodeGroup>

```bash cURL
# Request 1 SOL (1,000,000,000 lamports) to a Devnet address
# Replace <YOUR_WALLET_ADDRESS> with an actual base-58 public key
# Ensure you are targeting a Devnet RPC URL
curl -X POST -H "Content-Type: application/json" -d \
  '{
    "jsonrpc": "2.0",
    "id": 1,
    "method": "requestAirdrop",
    "params": [
      "<YOUR_WALLET_ADDRESS>",
      1000000000
    ]
  }' \
  https://devnet.helius-rpc.com/?api-key=<api-key> 

# Request 0.5 SOL with "confirmed" commitment
curl -X POST -H "Content-Type: application/json" -d \
  '{
    "jsonrpc": "2.0",
    "id": 1,
    "method": "requestAirdrop",
    "params": [
      "<YOUR_WALLET_ADDRESS>",
      500000000,
      {
        "commitment": "confirmed"
      }
    ]
  }' \
  https://devnet.helius-rpc.com/?api-key=<api-key>
```

```javascript JavaScript (using @solana/web3.js)
const { Connection, PublicKey, LAMPORTS_PER_SOL } = require('@solana/web3.js');

async function getAirdrop(walletAddress) {
  // Connect to Devnet
  const connection = new Connection('https://devnet.helius-rpc.com/?api-key=<api-key>', 'confirmed');
  const publicKey = new PublicKey(walletAddress);

  try {
    console.log(`Requesting airdrop of 1 SOL to ${walletAddress} on Devnet...`);
    
    // Request an airdrop of 1 SOL
    const airdropSignature = await connection.requestAirdrop(
      publicKey,
      LAMPORTS_PER_SOL // 1 SOL
    );

    console.log(`Airdrop requested. Transaction signature: ${airdropSignature}`);

    // Confirm the transaction
    // Note: The `confirmTransaction` method in web3.js has evolved.
    // For newer versions, you might use `connection.confirmTransaction({ signature: airdropSignature, blockhash: latestBlockhash.blockhash, lastValidBlockHeight: latestBlockhash.lastValidBlockHeight }, 'confirmed');`
    // For simplicity, we'll log the signature and you can check on an explorer.
    // Or, more robustly, you can poll getSignatureStatuses.

    await connection.confirmTransaction(airdropSignature);
    console.log(`Airdrop successful for ${walletAddress}!`);

    const balance = await connection.getBalance(publicKey);
    console.log(`Current balance for ${walletAddress}: ${balance / LAMPORTS_PER_SOL} SOL`);

  } catch (error) {
    console.error(`Error requesting airdrop for ${walletAddress}:`, error);
  }
}

// Replace with a Devnet wallet address you control
const myDevnetWallet = 'REPLACE_WITH_YOUR_DEVNET_WALLET_ADDRESS'; 
// Example: const myDevnetWallet = new Keypair().publicKey.toBase58(); // For a new temporary wallet

if (myDevnetWallet === 'REPLACE_WITH_YOUR_DEVNET_WALLET_ADDRESS') {
  console.warn("Please replace 'REPLACE_WITH_YOUR_DEVNET_WALLET_ADDRESS' with an actual Devnet wallet address to run the example.");
} else {
  // getAirdrop(myDevnetWallet);
  console.log("Uncomment the line above and replace the placeholder to run the airdrop example.");
}
```

</CodeGroup>

## 开发者提示

*   **网络特定：**此方法仅在启用水龙头的测试网络（Devnet、Testnet）上有效。在 Mainnet Beta 上将失败。
*   **速率限制：**空投水龙头通常有速率限制以防止滥用。如果您在短时间内发出太多请求，可能会收到错误。
*   **金额限制：**每次空投或每个时间段内您可以请求的 SOL 数量可能有限制。
*   **确认：**在 `requestAirdrop` 返回签名后，交易仍需由网络处理和确认。您可以使用 `confirmTransaction`（来自 `@solana/web3.js`）或轮询 `getSignatureStatuses` 以等待确认。

本指南解释了如何使用 `requestAirdrop` 为 Solana 开发网络上的测试账户提供资金。