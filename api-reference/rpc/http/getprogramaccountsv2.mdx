---
title: "getProgramAccountsV2"
"og:title": "getProgramAccountsV2 Solana RPC Method"
sidebarTitle: "getProgramAccountsV2"
description: "Enhanced version of getProgramAccounts with cursor-based pagination and changedSinceSlot support for efficiently querying large sets of accounts owned by specific Solana programs with incremental updates."
"og:description": "Get a free RPC and explore the getProgramAccountsV2 RPC Method with pagination support. Includes request parameters, response examples, code snippets, and in-browser testing for both Solana Mainnet and Devnet."
openapi: "/openapi/rpc-http/getProgramAccountsV2.yaml POST /"
---

<Warning>
**Beta release**: Please note `getProgramAccountsV2` is available for early use. Contact support to report any issues you experience.
</Warning>

## Overview

`getProgramAccountsV2` is an enhanced version of the standard `getProgramAccounts` method, designed for applications that need to efficiently query large sets of accounts owned by specific Solana programs. This method introduces cursor-based pagination and incremental update capabilities.

<Info>
**New Features in V2:**
- **Cursor-based pagination**: Configure limits from 1 to 10,000 accounts per request
- **Incremental updates**: Use `changedSinceSlot` to fetch only recently modified accounts  
- **Better performance**: Prevents timeouts and reduces memory usage for large datasets
- **Backward compatibility**: Supports all existing `getProgramAccounts` parameters
</Info>

## Key Benefits

<CardGroup cols={2}>
  <Card title="Scalable Queries" icon="chart-line">
    Handle programs with millions of accounts by paginating through results efficiently
  </Card>
  <Card title="Real-time Sync" icon="arrows-rotate">
    Use `changedSinceSlot` for incremental updates and real-time data synchronization
  </Card>
  <Card title="Prevent Timeouts" icon="clock">
    Large queries that previously timed out now work reliably with pagination
  </Card>
  <Card title="Memory Efficient" icon="microchip">
    Process data in chunks instead of loading everything into memory at once
  </Card>
</CardGroup>

## Pagination Best Practices

<Warning>
**Important Pagination Behavior**: End of pagination is only indicated when **no accounts are returned**. The API may return fewer accounts than your limit due to filtering - always continue pagination until `paginationKey` is `null`.
</Warning>

### Basic Pagination Pattern

```typescript
let allAccounts = [];
let paginationKey = null;

do {
  const response = await fetch(`https://mainnet.helius-rpc.com/?api-key=${API_KEY}`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      jsonrpc: '2.0',
      id: '1',
      method: 'getProgramAccountsV2',
      params: [
        "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",
        {
          encoding: 'base64',
          filters: [{ dataSize: 165 }],
          limit: 5000,
          ...(paginationKey && { paginationKey })
        }
      ]
    })
  });
  
  const data = await response.json();
  allAccounts.push(...data.result.accounts);
  paginationKey = data.result.paginationKey;
} while (paginationKey);
```

### Incremental Updates

```typescript
// Get only accounts modified since slot 150000000
const incrementalUpdate = await fetch(`https://mainnet.helius-rpc.com/?api-key=${API_KEY}`, {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    jsonrpc: '2.0',
    id: '1',
    method: 'getProgramAccountsV2',
    params: [
      programId,
      {
        encoding: 'jsonParsed',
        limit: 1000,
        changedSinceSlot: 150000000
      }
    ]
  })
});
```

## Performance Tips

<Tip>
**Optimal Limit Size**: For most use cases, a limit of 1,000-5,000 accounts per request provides the best balance of performance and reliability.
</Tip>

- **Start with smaller limits** (1000) and increase based on your network performance
- **Use appropriate encoding**: `jsonParsed` for convenience, `base64` for performance
- **Apply filters** to reduce the dataset size before pagination
- **Store `paginationKey`** to resume queries if interrupted
- **Monitor response times** and adjust limits accordingly

## Migration from getProgramAccounts

Migrating from the original method is straightforward - simply replace the method name and add pagination parameters:

```diff
{
  "jsonrpc": "2.0",
  "id": "1",
- "method": "getProgramAccounts",
+ "method": "getProgramAccountsV2",
  "params": [
    "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",
    {
      "encoding": "base64",
      "filters": [{ "dataSize": 165 }],
+     "limit": 5000
    }
  ]
}
```

## Related Methods

<CardGroup cols={2}>
  <Card title="getProgramAccounts" icon="code" href="/api-reference/rpc/http/getprogramaccounts">
    Original method without pagination
  </Card>
  <Card title="getTokenAccountsByOwnerV2" icon="wallet" href="/api-reference/rpc/http/gettokenaccountsbyownerv2">
    V2 method for token account queries
  </Card>
</CardGroup>
